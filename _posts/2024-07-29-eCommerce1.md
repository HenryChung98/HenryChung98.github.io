---
layout: single
title: "E-Commerce Website Project_1"
categories: project
tags: [django]
author_profile: false
search: true
use_math: true
---

{% raw %}

### Setup

```zsh
mkdir e-commerce-project
cd e-commerce-project
pyenv virtualenv 3.7.13 django_ecommerce_env
pip3 install django==2.2
pyenv local django_ecommerce_env
django-admin startproject ecommerce_project
cd ecommerce_project
python manage.py startapp ecommerce
```

```python
# settings.py

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'ecommerce',
]
```

### allauth setup

[Quick start](https://docs.allauth.org/en/latest/installation/quickstart.html)

django-allauth is a Django application that provides comprehensive user authentication, registration, and account management functionalities. It simplifies the integration of user authentication and social account logins into your Django project.

```zsh
pip install django-allauth
```

```python
# settings.py
INSTALLED_APPS = [
    ...
    'ecommerce',

    'django.contrib.sites',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
]
SITE_ID = 1
...
MIDDLEWARE = [
    ...
    'allauth.account.middleware.AccountMiddleware',
    ...
]

...
# Auth settings

AUTHENTICATION_BACKENDS = [
    # Needed to login by username in Django admin, regardless of `allauth`
    'django.contrib.auth.backends.ModelBackend',

    # `allauth` specific authentication methods, such as login by email
    'allauth.account.auth_backends.AuthenticationBackend',
]

# Email settings
EMAIL_BACKEND = "django.core.mail.backends.console.EmailBackend"
```

And migrate it

```zsh
python manage.py migrate
```

### Pages

we need index(homepage), sign in, sign up, user profile, item list, item detail pages.
Since sign in, sign up pages already exist, I will just change urls.py in project directory and create the rest.

The file structure should be

```python
ecommerce_project/
    ecommerce/
        static/
            ecommerce/
                assets/
                    ...
                styles/
                    style.css
                    ...
        templates/
            ecommerce/
                index.html
                ...
            ecommerce_base/
                base.html
                ...
```

I simply made base.html
```html
{% load static %}

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <title>{% block title %}Coplate{% endblock title %}</title>
  </head>
  <body>
    {% block header %}{% endblock header %}
    {% block content %}{% endblock content %}
    {% block footer %}{% endblock footer %}
  </body>
</html>

```
and index.html

```html
{% extends "ecommerce_base/base.html" %}

{% block content %}
<h1>hi</h1>
{% endblock content %}
```

To render the page, 

```python
# urls.py in project dir
from django.contrib import admin
from django.urls import path, include


urlpatterns = [
    # admin
    path('admin/', admin.site.urls),

    # ecommerce
    path('', include("ecommerce.urls")),

    # allauth
    path('', include("allauth.urls")), # for sign in, sign up, etc
]

```

```python
# urls.py in ecommerce
from django.urls import path
from . import views

urlpatterns = [
    path("", views.index, name='index')
]

```

```python
# views.py

from django.shortcuts import render

def index(request):
    return render(request, "ecommerce/index.html")
```
Now I see index, login pages.

![des1](/assets/images/2024-07-29-ecommerce1/des1.png)

![des2](/assets/images/2024-07-29-ecommerce1/des2.png)


### Create Models

We need User, Product, Order, OrderItem, Cart, CartItem, Review models.



#### Create User Model

For user model, you need to add 'AUTH_USER_MODEL = "[app-name].User'" to settings.py at very bottom.

```python
# admin.py

from django.contrib import admin
from .models import User
from django.contrib.auth.admin import UserAdmin

admin.site.register(User, UserAdmin)
```

UserAdmin includes all necessary fields and functionalities, like handling permissions and user information.

#### Create Super User

```zsh
python manage.py createsuperuser
# type your info
```

#### Create Models

{% endraw }
